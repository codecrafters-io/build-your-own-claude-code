@@ -1,57 +1,53 @@
 use std::env;
 use std::process;

 use async_openai::{
     config::OpenAIConfig,
     types::{
         ChatCompletionRequestMessage, ChatCompletionRequestUserMessageArgs,
         CreateChatCompletionRequestArgs,
     },
     Client,
 };

 #[tokio::main]
 async fn main() {
-    // You can use print statements as follows for debugging, they'll be visible when running tests.
-    eprintln!("Logs from your program will appear here!");
+    let prompt = get_prompt();
+    let api_key = get_env("OPENROUTER_API_KEY");
+    let base_url = get_env("OPENROUTER_BASE_URL");

-    // TODO: Uncomment the code below to pass the first stage
-    // let prompt = get_prompt();
-    // let api_key = get_env("OPENROUTER_API_KEY");
-    // let base_url = get_env("OPENROUTER_BASE_URL");
-    //
-    // let config = OpenAIConfig::new()
-    //     .with_api_key(api_key)
-    //     .with_api_base(base_url);
-    //
-    // let client = Client::with_config(config);
-    //
-    // match call_llm(&client, &prompt).await {
-    //     Ok(content) => println!("{}", content),
-    //     Err(e) => fatal(&format!("{}", e)),
-    // }
+    let config = OpenAIConfig::new()
+        .with_api_key(api_key)
+        .with_api_base(base_url);
+
+    let client = Client::with_config(config);
+
+    match call_llm(&client, &prompt).await {
+        Ok(content) => println!("{}", content),
+        Err(e) => fatal(&format!("{}", e)),
+    }
 }

 fn get_prompt() -> String {
     let args: Vec<String> = env::args().collect();
     for (i, arg) in args.iter().enumerate() {
         if arg == "-p" && i + 1 < args.len() {
             return args[i + 1].clone();
         }
     }
     fatal("error: -p flag is required");
 }

 fn get_env(key: &str) -> String {
     env::var(key).unwrap_or_else(|_| {
         fatal(&format!("error: {} environment variable is not set", key));
     })
 }

 async fn call_llm(
     client: &Client<OpenAIConfig>,
     prompt: &str,
 ) -> Result<String, Box<dyn std::error::Error>> {
     let user_message = ChatCompletionRequestUserMessageArgs::default()
         .content(prompt)
         .build()?;

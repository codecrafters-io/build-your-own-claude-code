@@ -1,58 +1,66 @@
 package main

 import (
 	"context"
 	"flag"
 	"fmt"
 	"os"

 	"github.com/openai/openai-go/v3"
 	"github.com/openai/openai-go/v3/option"
 )

 // Ensures gofmt does not remove the 'context', 'openai', and 'openai/option' import
 // Feel free to remove this
 var _ = context.Background
 var _ = openai.NewClient
 var _ = option.WithAPIKey

 func main() {
-	// You can use print statements as follows for debugging, they'll be visible when running tests.
-	fmt.Fprintln(os.Stderr, "Logs from your program will appear here!")
-
 	var prompt string
 	flag.StringVar(&prompt, "p", "", "Prompt to send to LLM")
 	flag.Parse()

 	if prompt == "" {
 		panic("Prompt must not be empty")
 	}

-	// TODO: Uncomment the lines below to pass the first stage
-	// client := openai.NewClient(
-	// 	option.WithAPIKey(os.Getenv("OPENROUTER_API_KEY")),
-	// 	option.WithBaseURL(os.Getenv("OPENROUTER_BASE_URL")),
-	// )
-	// resp, err := client.Chat.Completions.New(context.Background(),
-	// 	openai.ChatCompletionNewParams{
-	// 		Model: "anthropic/claude-haiku-4.5",
-	// 		Messages: []openai.ChatCompletionMessageParamUnion{
-	// 			{
-	// 				OfUser: &openai.ChatCompletionUserMessageParam{
-	// 					Content: openai.ChatCompletionUserMessageParamContentUnion{
-	// 						OfString: openai.String(prompt),
-	// 					},
-	// 				},
-	// 			},
-	// 		},
-	// 	},
-	// )
-	// if err != nil {
-	// 	fmt.Fprintf(os.Stderr, "error: %v\n", err)
-	// 	os.Exit(1)
-	// }
-	// if len(resp.Choices) == 0 {
-	// 	panic("no choices in response")
-	// }
-	// fmt.Print(resp.Choices[0].Message.Content)
+	apiKey := os.Getenv("OPENROUTER_API_KEY")
+	if apiKey == "" {
+		fmt.Fprintln(os.Stderr, "error: OPENROUTER_API_KEY environment variable is not set")
+		os.Exit(1)
+	}
+
+	baseURL := os.Getenv("OPENROUTER_BASE_URL")
+	if baseURL == "" {
+		fmt.Fprintln(os.Stderr, "error: OPENROUTER_BASE_URL environment variable is not set")
+		os.Exit(1)
+	}
+
+	client := openai.NewClient(
+		option.WithAPIKey(apiKey),
+		option.WithBaseURL(baseURL),
+	)
+	resp, err := client.Chat.Completions.New(context.Background(),
+		openai.ChatCompletionNewParams{
+			Model: "anthropic/claude-haiku-4.5",
+			Messages: []openai.ChatCompletionMessageParamUnion{
+				{
+					OfUser: &openai.ChatCompletionUserMessageParam{
+						Content: openai.ChatCompletionUserMessageParamContentUnion{
+							OfString: openai.String(prompt),
+						},
+					},
+				},
+			},
+		},
+	)
+	if err != nil {
+		fmt.Fprintf(os.Stderr, "error: %v\n", err)
+		os.Exit(1)
+	}
+	if len(resp.Choices) == 0 {
+		panic("no choices in response")
+	}
+	fmt.Print(resp.Choices[0].Message.Content)
 }
